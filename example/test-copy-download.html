<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试复制和下载功能</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .theme-switcher {
            margin-bottom: 20px;
        }

        .theme-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }

        .theme-btn:hover {
            background: #0056b3;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>复制和下载功能测试</h1>

        <div class="theme-switcher">
            <button class="theme-btn" onclick="toggleTheme()">切换主题</button>
        </div>

        <div id="markdown-container">
            <!-- Markdown 内容将在这里渲染 -->
        </div>
    </div>

    <script>
        // 模拟 markdown 内容
        const markdownContent = `
# 测试复制和下载功能

以下是一段示例代码，应该显示复制和下载按钮：

\`\`\`javascript
function greet(name) {
  console.log('Hello, ' + name + '!');
  return 'Hello, ' + name + '!';
}

// 调用函数
greet('World');

// 更复杂的示例
const users = [
  { id: 1, name: 'Alice', age: 25 },
  { id: 2, name: 'Bob', age: 30 },
  { id: 3, name: 'Charlie', age: 35 }
];

function getUserById(id) {
  return users.find(user => user.id === id);
}

console.log(getUserById(2));
\`\`\`

\`\`\`python
def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

# 计算前10个斐波那契数
for i in range(10):
    print(f"fibonacci({i}) = {fibonacci(i)}")
\`\`\`

\`\`\`css
.button {
  background-color: #4CAF50;
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.3s;
}

.button:hover {
  background-color: #45a049;
}
\`\`\`
`;

        let currentTheme = 'light';

        function toggleTheme () {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.body.style.backgroundColor = currentTheme === 'dark' ? '#1a1a1a' : '#f5f5f5';
            document.body.style.color = currentTheme === 'dark' ? '#ffffff' : '#000000';

            const container = document.querySelector('.container');
            container.style.backgroundColor = currentTheme === 'dark' ? '#2d2d2d' : '#ffffff';
            container.style.color = currentTheme === 'dark' ? '#ffffff' : '#000000';

            // 这里应该重新渲染 markdown 内容以应用新主题
            renderMarkdown();
        }

        function renderMarkdown () {
            // 这里模拟渲染 markdown 内容
            // 在实际应用中，这里会调用我们的 Markdown 组件
            const container = document.getElementById('markdown-container');
            container.innerHTML = `
        <p>注意：这是一个测试页面。在实际的 React 应用中，这里会渲染带有复制和下载按钮的代码块。</p>
        <p>要查看实际效果，请在 React 应用中使用以下配置：</p>
        <pre><code>
&lt;Markdown 
  theme="${currentTheme}"
  codeBlock={{ headerActions: true }}
&gt;
  {markdownContent}
&lt;/Markdown&gt;
        </code></pre>
        <p>当前主题：<strong>${currentTheme}</strong></p>
      `;
        }

        // 初始渲染
        renderMarkdown();
    </script>
</body>

</html>